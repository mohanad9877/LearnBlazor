@page "/"
@using Microsoft.AspNetCore.Components
@inject NavigationManager Navigation
@inject IJSRuntime JS

<style>
    /* Keep your existing styles */
    .video-background {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -1;
        object-fit: cover;
    }

    .content {
        position: relative;
        z-index: 1;
        color: white;
        text-shadow: 0 0 10px rgba(0,0,0,0.7);
        padding: 2rem;
    }
</style>

<!-- Remove 'loop' attribute and add ended event handler -->
<video id="splashVideo" class="video-background"
       autoplay
       muted
       playsinline
       @onended="OnVideoEnded"
       allow="autoplay">
    <source src="/vid/vid.mp4" type="video/mp4">
    Your browser does not support the video tag.
</video>

<div class="content">
    <PageTitle>Home</PageTitle>
    <h1>Hello, world!</h1>
    Welcome to your new app.
</div>

@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        if (firstRender)
        {
            await JS.InvokeVoidAsync("splashVideo");
        }
    }


    //protected override async Task OnAfterRenderAsync(bool firstRender)
    //{
       // await JS.InvokeVoidAsync("splashVideo");

    //}

    private void OnVideoEnded()
    {
        // Navigate to counter page when video ends
        Navigation.NavigateTo("/counter");
    }
}